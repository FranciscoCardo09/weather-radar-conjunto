import{c as se,a as x,f as g,t as Me}from"../chunks/B9iJ3e22.js";import{o as Ne}from"../chunks/D-XqJJ3s.js";import{f as Y,A as ye,g as t,j as e,i as a,ai as T,t as B,B as ge,v as o,aO as ae,aS as je,ag as X,S as be,aP as ze,N as k,ah as Pe}from"../chunks/D3onIxrH.js";import{s as f,d as Se,a as he}from"../chunks/BUzLhcr0.js";import{l as oe,s as ne,p as He,i as O,b as Ve,a as Ae}from"../chunks/8GWtkEVA.js";import{I as de,s as le,C as Re,e as re,c as $e,i as we,h as Te,N as Be,b as Ee,d as Fe,p as Ie}from"../chunks/BmZ4larQ.js";import{g as We}from"../chunks/AGS36fEn.js";import{B as qe}from"../chunks/CMQomBvk.js";import"../chunks/L4Qmuujs.js";function Le(m,r){const v=oe(r,["children","$$slots","$$events","$$legacy"]);const i=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16"}],["path",{d:"M18 17V9"}],["path",{d:"M13 17V5"}],["path",{d:"M8 17v-3"}]];de(m,ne({name:"chart-column"},()=>v,{get iconNode(){return i},children:(c,u)=>{var n=se(),l=Y(n);le(l,r,"default",{}),x(c,n)},$$slots:{default:!0}}))}function Oe(m,r){const v=oe(r,["children","$$slots","$$events","$$legacy"]);const i=[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"}]];de(m,ne({name:"flame"},()=>v,{get iconNode(){return i},children:(c,u)=>{var n=se(),l=Y(n);le(l,r,"default",{}),x(c,n)},$$slots:{default:!0}}))}function Ue(m,r){const v=oe(r,["children","$$slots","$$events","$$legacy"]);const i=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor"}]];de(m,ne({name:"tag"},()=>v,{get iconNode(){return i},children:(c,u)=>{var n=se(),l=Y(n);le(l,r,"default",{}),x(c,n)},$$slots:{default:!0}}))}function Ze(m,r){const v=oe(r,["children","$$slots","$$events","$$legacy"]);const i=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"}],["path",{d:"M12 9v4"}],["path",{d:"M12 17h.01"}]];de(m,ne({name:"triangle-alert"},()=>v,{get iconNode(){return i},children:(c,u)=>{var n=se(),l=Y(n);le(l,r,"default",{}),x(c,n)},$$slots:{default:!0}}))}function De(m,r){const v=oe(r,["children","$$slots","$$events","$$legacy"]);const i=[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18"}],["path",{d:"M4 22h16"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z"}]];de(m,ne({name:"trophy"},()=>v,{get iconNode(){return i},children:(c,u)=>{var n=se(),l=Y(n);le(l,r,"default",{}),x(c,n)},$$slots:{default:!0}}))}var Ge=g('<div class="bg-[var(--bg-card)] rounded-[16px] p-5 flex flex-col gap-4 w-full"><div class="flex items-center gap-3 w-full"><div class="w-11 h-11 rounded-[12px] flex items-center justify-center shrink-0" style="background-color: var(--accent-primary-soft);"><!></div> <div class="flex flex-col gap-[2px] flex-1 min-w-0"><span class="font-display font-bold text-base text-[var(--text-primary)] truncate"> </span> <span class="font-body text-[13px] text-[var(--text-secondary)] truncate"> </span></div></div> <div class="flex gap-2 w-full"><div class="flex-1 flex flex-col items-center gap-1 bg-[var(--metric-card-bg)] rounded-[12px] py-3 px-[10px]"><span class="font-display font-extrabold text-[20px] text-[var(--text-primary)]"> </span> <span class="font-body text-[11px] font-medium text-[var(--text-secondary)]">Temp</span></div> <div class="flex-1 flex flex-col items-center gap-1 bg-[var(--metric-card-bg)] rounded-[12px] py-3 px-[10px]"><span class="font-display font-extrabold text-[20px] text-[var(--text-primary)]"> </span> <span class="font-body text-[11px] font-medium text-[var(--text-secondary)]">Humedad</span></div> <div class="flex-1 flex flex-col items-center gap-1 bg-[var(--metric-card-bg)] rounded-[12px] py-3 px-[10px]"><span class="font-display font-extrabold text-[20px] text-[var(--text-primary)]"> </span> <span class="font-body text-[11px] font-medium text-[var(--text-secondary)]">Viento</span></div></div></div>');function Je(m,r){ye(r,!0);var v=Ge(),i=t(v),c=t(i),u=t(c);Re(u,{size:22,class:"text-[var(--accent-primary)]"}),e(c);var n=a(c,2),l=t(n),w=t(l,!0);e(l);var b=a(l,2),h=t(b,!0);e(b),e(n),e(i);var E=a(i,2),z=t(E),F=t(z),U=t(F);e(F),T(2),e(z);var C=a(z,2),H=t(C),Z=t(H);e(H),T(2),e(C);var V=a(C,2),M=t(V),I=t(M);e(M),T(2),e(V),e(E),e(v),B(()=>{f(w,r.weather.city_name),f(h,r.weather.condition),f(U,`${r.weather.temperature??""}°C`),f(Z,`${r.weather.humidity??""}%`),f(I,`${r.weather.wind_speed??""} km/h`)}),x(m,v),ge()}var Ke=g('<div class="rounded-[16px] p-4 flex items-center gap-3 w-full" style="background-color: var(--color-error-soft);"><div class="w-9 h-9 rounded-[10px] bg-[var(--bg-page)] flex items-center justify-center shrink-0"><!></div> <div class="flex flex-col gap-[2px] flex-1 min-w-0"><span class="font-display font-bold text-sm text-[var(--color-error)] truncate"> </span> <span class="font-body text-[12px] text-[var(--text-secondary)] truncate"> </span></div></div>');function Qe(m,r){let v=He(r,"errorMsg",3,"No se pudo obtener datos");var i=Ke(),c=t(i),u=t(c);Ze(u,{size:18,class:"text-[var(--color-error)]"}),e(c);var n=a(c,2),l=t(n),w=t(l,!0);e(l);var b=a(l,2),h=t(b,!0);e(b),e(n),e(i),B(()=>{f(w,r.cityName),f(h,v())}),x(m,i)}var Xe=g('<div class="flex items-center justify-between rounded-[8px] px-3 py-2 transition-colors"><div class="flex items-center gap-3"><span class="font-body text-sm font-semibold text-[var(--text-tertiary)] w-5"></span> <span class="font-body text-sm text-[var(--text-primary)]"> </span></div></div>'),Ye=g('<div class="flex flex-col gap-[2px]"><span class="font-body text-sm font-medium text-[var(--text-secondary)]"> </span> <span class="font-body text-sm text-[var(--text-tertiary)]"> </span></div>'),et=g('<div class="flex flex-col gap-6 w-full"><div class="flex gap-4 w-full flex-col md:flex-row"><div class="flex-1 bg-[var(--bg-card)] rounded-[16px] p-5 flex flex-col gap-4"><div class="flex items-center gap-2"><div class="w-6 h-6 rounded-[6px] flex items-center justify-center" style="background-color: var(--accent-primary);"><!></div> <span class="font-display font-bold text-sm text-[var(--text-primary)]">Promedios</span></div> <div class="flex flex-col gap-3"><div class="flex justify-between items-center"><span class="font-body text-sm text-[var(--text-secondary)]">Temperatura</span> <span class="font-body text-sm font-semibold text-[var(--text-primary)]"> </span></div> <div class="flex justify-between items-center"><span class="font-body text-sm text-[var(--text-secondary)]">Humedad</span> <span class="font-body text-sm font-semibold text-[var(--text-primary)]"> </span></div> <div class="flex justify-between items-center"><span class="font-body text-sm text-[var(--text-secondary)]">Viento</span> <span class="font-body text-sm font-semibold text-[var(--text-primary)]"> </span></div></div></div> <div class="flex-1 bg-[var(--bg-card)] rounded-[16px] p-5 flex flex-col gap-4"><div class="flex items-center gap-2"><div class="w-6 h-6 rounded-[6px] flex items-center justify-center" style="background-color: var(--accent-orange);"><!></div> <span class="font-display font-bold text-sm text-[var(--text-primary)]">Extremos</span></div> <div class="flex flex-col gap-3"><div class="flex justify-between items-center"><span class="font-body text-sm text-[var(--text-secondary)]">Más caliente</span> <span class="font-body text-sm font-semibold text-[var(--text-primary)]"> </span></div> <div class="flex justify-between items-center"><span class="font-body text-sm text-[var(--text-secondary)]">Más fría</span> <span class="font-body text-sm font-semibold text-[var(--text-primary)]"> </span></div> <div class="flex justify-between items-center"><span class="font-body text-sm text-[var(--text-secondary)]">Más ventosa</span> <span class="font-body text-sm font-semibold text-[var(--text-primary)]"> </span></div></div></div></div> <div class="flex gap-4 w-full flex-col md:flex-row"><div class="flex-1 bg-[var(--bg-card)] rounded-[16px] p-5 flex flex-col gap-4"><div class="flex items-center gap-2"><div class="w-6 h-6 rounded-[6px] flex items-center justify-center" style="background-color: var(--accent-orange);"><!></div> <span class="font-display font-bold text-sm text-[var(--text-primary)]">Ranking por temperatura</span></div> <div class="flex flex-col gap-1"></div></div> <div class="flex-1 bg-[var(--bg-card)] rounded-[16px] p-5 flex flex-col gap-4"><div class="flex items-center gap-2"><div class="w-6 h-6 rounded-[6px] flex items-center justify-center" style="background-color: var(--accent-teal);"><!></div> <span class="font-display font-bold text-sm text-[var(--text-primary)]">Agrupación por condición</span></div> <div class="flex flex-col gap-3"></div></div></div></div>');function tt(m,r){ye(r,!0);var v=et(),i=t(v),c=t(i),u=t(c),n=t(u),l=t(n);Le(l,{size:14,color:"white"}),e(n),T(2),e(u);var w=a(u,2),b=t(w),h=a(t(b),2),E=t(h);e(h),e(b);var z=a(b,2),F=a(t(z),2),U=t(F);e(F),e(z);var C=a(z,2),H=a(t(C),2),Z=t(H);e(H),e(C),e(w),e(c);var V=a(c,2),M=t(V),I=t(M),xe=t(I);Oe(xe,{size:14,color:"white"}),e(I),T(2),e(M);var ie=a(M,2),D=t(ie),W=a(t(D),2),fe=t(W,!0);e(W),e(D);var ee=a(D,2),te=a(t(ee),2),me=t(te,!0);e(te),e(ee);var ce=a(ee,2),ve=a(t(ce),2),d=t(ve,!0);e(ve),e(ce),e(ie),e(V),e(i);var s=a(i,2),p=t(s),$=t(p),A=t($),P=t(A);De(P,{size:14,color:"white"}),e(A),T(2),e($);var R=a($,2);re(R,21,()=>r.summary.ranking,we,(j,q,L)=>{var J=Xe();$e(J,L===0?"background-color: var(--rank-first-bg);":"");var pe=t(J),K=t(pe);K.textContent=L+1;var Q=a(K,2),ue=t(Q,!0);e(Q),e(pe),e(J),B(()=>f(ue,o(q))),x(j,J)}),e(R),e(p);var G=a(p,2),_=t(G),y=t(_),S=t(y);Ue(S,{size:14,color:"white"}),e(y),T(2),e(_);var N=a(_,2);re(N,21,()=>Object.entries(r.summary.by_condition),we,(j,q)=>{var L=ae(()=>je(o(q),2));let J=()=>o(L)[0],pe=()=>o(L)[1];var K=Ye(),Q=t(K),ue=t(Q,!0);e(Q);var _e=a(Q,2),ke=t(_e,!0);e(_e),e(K),B(Ce=>{f(ue,J()),f(ke,Ce)},[()=>pe().join(", ")]),x(j,K)}),e(N),e(G),e(s),e(v),B((j,q,L)=>{f(E,`${j??""}°C`),f(U,`${q??""}%`),f(Z,`${L??""} km/h`),f(fe,r.summary.hottest_city),f(me,r.summary.coldest_city),f(d,r.summary.windiest_city)},[()=>r.summary.average_temperature.toFixed(1),()=>r.summary.average_humidity.toFixed(1),()=>r.summary.average_wind_speed.toFixed(1)]),x(m,v),ge()}var at=g('<div class="flex items-center gap-2"><div class="w-4 h-4 rounded-full border-2 border-[var(--accent-primary)] border-t-transparent animate-spin"></div> <span class="font-body text-sm text-[var(--text-secondary)]">Cargando ciudades…</span></div>'),rt=g('<button type="button" class="font-body text-sm px-3 py-[6px] rounded-full border transition-colors"><!> </button>'),st=g('<div class="flex flex-wrap gap-2 w-full"></div>'),ot=g('<div class="w-4 h-4 rounded-full border-2 border-white border-t-transparent animate-spin"></div>'),nt=g('<div class="rounded-[16px] p-4" style="background-color: var(--color-error-soft);"><p class="font-body text-sm text-[var(--color-error)]"> </p></div>'),dt=g('<div class="flex flex-col gap-4 w-full"><h2 class="font-display font-bold text-[22px] text-[var(--text-primary)]">Resultados</h2> <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 w-full"></div></div>'),lt=g('<div class="flex flex-col gap-4 w-full"><h2 class="font-display font-bold text-base text-[var(--color-error)]">Ciudades con error</h2> <div class="flex flex-col gap-3 w-full"></div></div>'),it=g('<!> <!> <div class="flex flex-col gap-4 w-full"><h2 class="font-display font-bold text-[22px] text-[var(--text-primary)]">Resumen comparativo</h2> <!></div>',1),ct=g('<div class="min-h-screen flex flex-col bg-[var(--bg-page)]"><!> <main class="flex flex-col gap-8 px-12 py-10"><!> <div class="flex flex-col gap-1"><h1 class="font-display font-bold text-[28px] text-[var(--text-primary)]">Comparar ciudades</h1> <p class="font-body text-sm text-[var(--text-secondary)]">Seleccioná las ciudades que querés comparar</p></div> <div class="bg-[var(--bg-card)] rounded-[16px] p-6 flex flex-col gap-4 w-full"><span class="font-display font-bold text-base text-[var(--text-primary)]">Ciudades disponibles</span> <!> <div class="flex justify-end"><button type="button" class="flex items-center gap-2 text-white rounded-[10px] px-5 py-[10px] font-body text-sm font-semibold transition-colors disabled:opacity-50 disabled:cursor-not-allowed" style="background-color: var(--accent-primary);"><!> Comparar</button></div></div> <!> <!></main></div>');function bt(m,r){ye(r,!0);const v=()=>Ae(Ie,"$page",i),[i,c]=Ve();let u=X(be([])),n=X(be(new Set)),l=X(null),w=X(!1),b=X(!0),h=X(null);const E=ae(()=>o(n).size),z=ae(()=>o(E)>=2&&o(E)<=50);Ne(async()=>{try{k(u,await Ee(),!0)}catch(s){k(h,s instanceof Error?s.message:"No se pudo conectar con el servidor",!0)}finally{k(b,!1)}const d=v().url.searchParams.get("ids");if(d){const s=[...new Set(d.split(",").filter(Boolean))];s.length>=2&&(k(n,new Set(s),!0),await U(s))}});function F(d){const s=new Set(o(n));if(s.has(d))s.delete(d);else{if(s.size>=50)return;s.add(d)}k(n,s,!0)}async function U(d){const s=d??[...o(n)];if(!(s.length<2)){k(w,!0),k(h,null),k(l,null);try{k(l,await Fe(s),!0);const p=new URL(window.location.href);p.searchParams.set("ids",s.join(",")),We(p.pathname+p.search,{replaceState:!0,noScroll:!0})}catch(p){k(h,p instanceof Error?p.message:"No se pudo conectar con el servidor",!0)}finally{k(w,!1)}}}var C=ct();Te("1ez3k3s",d=>{ze(()=>{Pe.title="Comparar ciudades – Weather Radar"})});var H=t(C);Be(H,{variant:"standard"});var Z=a(H,2),V=t(Z);qe(V,{href:"/"});var M=a(V,4),I=a(t(M),2);{var xe=d=>{var s=at();x(d,s)},ie=d=>{var s=st();re(s,21,()=>o(u),p=>p.id,(p,$)=>{const A=ae(()=>o(n).has(o($).id));var P=rt(),R=t(P);{var G=y=>{var S=Me("✓");x(y,S)};O(R,y=>{o(A)&&y(G)})}var _=a(R,1,!0);e(P),B(()=>{$e(P,o(A)?"background-color: var(--yale-blue); color: white; border-color: var(--yale-blue);":"background-color: transparent; color: var(--chip-unselected-text); border-color: var(--chip-unselected-border);"),f(_,o($).name)}),he("click",P,()=>F(o($).id)),x(p,P)}),e(s),x(d,s)};O(I,d=>{o(b)?d(xe):d(ie,!1)})}var D=a(I,2),W=t(D),fe=t(W);{var ee=d=>{var s=ot();x(d,s)};O(fe,d=>{o(w)&&d(ee)})}T(),e(W),e(D),e(M);var te=a(M,2);{var me=d=>{var s=nt(),p=t(s),$=t(p,!0);e(p),e(s),B(()=>f($,o(h))),x(d,s)};O(te,d=>{o(h)&&d(me)})}var ce=a(te,2);{var ve=d=>{var s=it(),p=Y(s);{var $=_=>{var y=dt(),S=a(t(y),2);re(S,21,()=>o(l).cities,N=>N.city_id,(N,j)=>{Je(N,{get weather(){return o(j)}})}),e(S),e(y),x(_,y)};O(p,_=>{o(l).cities.length>0&&_($)})}var A=a(p,2);{var P=_=>{var y=lt(),S=a(t(y),2);re(S,21,()=>o(l).errors,N=>N.city_id,(N,j)=>{{let q=ae(()=>o(j).error??"No se pudo obtener datos");Qe(N,{get cityName(){return o(j).city_name},get errorMsg(){return o(q)}})}}),e(S),e(y),x(_,y)};O(A,_=>{o(l).errors&&o(l).errors.length>0&&_(P)})}var R=a(A,2),G=a(t(R),2);tt(G,{get summary(){return o(l).summary}}),e(R),x(d,s)};O(ce,d=>{o(l)&&d(ve)})}e(Z),e(C),B(()=>W.disabled=!o(z)||o(w)),he("click",W,()=>U()),x(m,C),ge(),c()}Se(["click"]);export{bt as component};
